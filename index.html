<!DOCTYPE HTML>
<html>
  <title>ads_bv's Birthday Countdown</title>
<head>
<style>
p {
  text-align: center;
  font-size: 60px;
  font-family: 'Courier', monospace;
}
body {
  background-color: rgb(75,150,245)
  }
  #counter {
text-align: center;
font-size: 60px;
font-family: 'Courier', monospace;
}
</style>
</head>
<body>
<p id="demo"></p>
<p id="counter">test</p>
<script>
/* jshint esversion: 8 */
var deadline = new Date("Jun 4, 2022 01:00:00").getTime();
var x = setInterval(function() {
var now = new Date().getTime();
var t = deadline - now;
var days = Math.floor(t / (1000 * 60 * 60 * 24));
var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
var seconds = Math.floor((t % (1000 * 60)) / 1000);
document.getElementById("demo").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    if (t < 0) {
        clearInterval(x);
        document.getElementById("demo").innerHTML = "EXPIRED";
    }
}, 1000);
  var xhttp = new XMLHttpRequest();
const fs = require("fs");
// Add a counter.txt file next to the html

   fetch("counter.txt")
  .then( res => res.blob() )
  .then( blob => {
  let counter = window.URL.createObjectURL(blob);
    window.location.assign(file);


console.log(counter)
var num = parseFloat(counter) + 1;
console.log(num)

fs.writeFile('counter.txt', num, err => {
  if (err) {
    console.error(err)
    return
  }
  })
 
var counte = document.getElementById("counter");

counte.innerHTML = counter;
});
window.addEventListener('beforeunload', function(userfardedthesite){
  xhttp.onreadystatechange = function() {
  let counter = downloadFile();
  var num = parseInt(counter) =- 1;
fs.writeFile('counter.txt', num, err => {
  if (err) {
    console.error(err)
    return
  }
  })
  }
});
  </script>  
</body>
</html>
